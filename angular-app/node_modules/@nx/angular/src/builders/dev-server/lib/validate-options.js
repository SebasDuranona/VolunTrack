"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateOptions = void 0;
const devkit_1 = require("@nx/devkit");
const semver_1 = require("semver");
const angular_version_utils_1 = require("../../../executors/utilities/angular-version-utils");
function validateOptions(options) {
    const { major: angularMajorVersion, version: angularVersion } = (0, angular_version_utils_1.getInstalledAngularVersionInfo)();
    if ((0, semver_1.lt)(angularVersion, '16.1.0') && options.forceEsbuild) {
        throw new Error((0, devkit_1.stripIndents) `The "forceEsbuild" option is only supported in Angular >= 16.1.0. You are currently using "${angularVersion}".
      You can resolve this error by removing the "forceEsbuild" option or by migrating to Angular 16.1.0.`);
    }
    if (angularMajorVersion < 17 && options.esbuildMiddleware?.length > 0) {
        throw new Error((0, devkit_1.stripIndents) `The "esbuildMiddleware" option is only supported in Angular >= 17.0.0. You are currently using "${angularVersion}".
      You can resolve this error by removing the "esbuildMiddleware" option or by migrating to Angular 17.0.0.`);
    }
    if ((0, semver_1.lt)(angularVersion, '17.2.0') && options.prebundle) {
        throw new Error((0, devkit_1.stripIndents) `The "prebundle" option is only supported in Angular >= 17.2.0. You are currently using "${angularVersion}".
      You can resolve this error by removing the "prebundle" option or by migrating to Angular 17.2.0.`);
    }
}
exports.validateOptions = validateOptions;
