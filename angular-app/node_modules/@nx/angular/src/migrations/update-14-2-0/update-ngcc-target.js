"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const devkit_1 = require("@nx/devkit");
async function default_1(tree) {
    let shouldFormat = false;
    (0, devkit_1.updateJson)(tree, 'package.json', (json) => {
        if (json.scripts?.postinstall?.includes('ngcc ')) {
            json.scripts.postinstall = json.scripts.postinstall.replace(/(.*)(ngcc --properties es2015 )(.*)/, '$1ngcc --properties es2020 $3');
            shouldFormat = true;
        }
        return json;
    });
    if (shouldFormat) {
        await (0, devkit_1.formatFiles)(tree);
    }
}
exports.default = default_1;
