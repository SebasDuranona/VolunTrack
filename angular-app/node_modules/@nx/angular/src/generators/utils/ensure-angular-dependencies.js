"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ensureAngularDependencies = void 0;
const version_utils_1 = require("./version-utils");
function ensureAngularDependencies(tree) {
    const pkgVersions = (0, version_utils_1.versions)(tree);
    const angularVersion = (0, version_utils_1.getInstalledPackageVersion)(tree, '@angular/core') ??
        pkgVersions.angularVersion;
    const angularDevkitVersion = (0, version_utils_1.getInstalledPackageVersion)(tree, '@angular-devkit/build-angular') ??
        pkgVersions.angularDevkitVersion;
    const rxjsVersion = (0, version_utils_1.getInstalledPackageVersion)(tree, 'rxjs') ?? pkgVersions.rxjsVersion;
    const tsLibVersion = (0, version_utils_1.getInstalledPackageVersion)(tree, 'tslib') ?? pkgVersions.tsLibVersion;
    const zoneJsVersion = (0, version_utils_1.getInstalledPackageVersion)(tree, 'zone.js') ?? pkgVersions.zoneJsVersion;
    return (0, version_utils_1.addDependenciesToPackageJsonIfDontExist)(tree, {
        '@angular/animations': angularVersion,
        '@angular/common': angularVersion,
        '@angular/compiler': angularVersion,
        '@angular/core': angularVersion,
        '@angular/forms': angularVersion,
        '@angular/platform-browser': angularVersion,
        '@angular/platform-browser-dynamic': angularVersion,
        '@angular/router': angularVersion,
        rxjs: rxjsVersion,
        tslib: tsLibVersion,
        'zone.js': zoneJsVersion,
    }, {
        '@angular/cli': angularDevkitVersion,
        '@angular/compiler-cli': angularVersion,
        '@angular/language-service': angularVersion,
        '@angular-devkit/build-angular': angularDevkitVersion,
        '@angular-devkit/schematics': angularDevkitVersion,
        '@schematics/angular': angularDevkitVersion,
    });
}
exports.ensureAngularDependencies = ensureAngularDependencies;
