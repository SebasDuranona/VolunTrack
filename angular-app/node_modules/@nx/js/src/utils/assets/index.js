"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.copyAssets = void 0;
const copy_assets_handler_1 = require("./copy-assets-handler");
async function copyAssets(options, context) {
    const assetHandler = new copy_assets_handler_1.CopyAssetsHandler({
        projectDir: context.projectsConfigurations.projects[context.projectName].root,
        rootDir: context.root,
        outputDir: options.outputPath,
        assets: options.assets,
        callback: typeof options?.watch === 'object' ? options.watch.onCopy : undefined,
    });
    const result = {
        success: true,
    };
    if (options.watch) {
        result.stop = await assetHandler.watchAndProcessOnAssetChange();
    }
    try {
        await assetHandler.processAllAssetsOnce();
    }
    catch {
        result.success = false;
    }
    return result;
}
exports.copyAssets = copyAssets;
